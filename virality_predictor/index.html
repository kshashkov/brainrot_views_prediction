<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Video Virality Predictor</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- TensorFlow.js -->
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.20.0/dist/tf.min.js"></script>
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      margin: 0;
      padding: 0;
      background: #0b1721;
      color: #f3f7fb;
    }
    .app {
      max-width: 960px;
      margin: 32px auto;
      padding: 24px;
      background: #111c29;
      border-radius: 12px;
      box-shadow: 0 16px 40px rgba(0, 0, 0, 0.45);
      border: 1px solid rgba(255, 255, 255, 0.06);
    }
    h1 {
      margin-top: 0;
      font-size: 24px;
      letter-spacing: 0.03em;
    }
    .status {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 16px;
      font-size: 14px;
      color: #b8c7da;
    }
    .status-indicator {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: #444f63;
    }
    .status--info { background: #2180a4; }
    .status--success { background: #28c081; }
    .status--error { background: #ff5459; }
    .grid {
      display: grid;
      grid-template-columns: 1.1fr 1.1fr;
      gap: 24px;
      margin-top: 16px;
    }
    @media (max-width: 800px) {
      .grid {
        grid-template-columns: 1fr;
      }
    }
    .card {
      padding: 16px;
      background: #0c1520;
      border-radius: 10px;
      border: 1px solid rgba(255, 255, 255, 0.04);
    }
    .card h2 {
      margin: 0 0 10px;
      font-size: 16px;
      color: #dbe6f5;
    }
    .upload-area {
      border: 1px dashed rgba(255, 255, 255, 0.3);
      border-radius: 10px;
      padding: 16px;
      text-align: center;
      cursor: pointer;
      background: rgba(15, 27, 43, 0.85);
      transition: border-color 0.2s ease, background 0.2s ease, transform 0.1s ease;
    }
    .upload-area.dragover {
      border-color: #2180a4;
      background: rgba(18, 44, 68, 0.95);
      transform: translateY(-1px);
    }
    .upload-area small {
      display: block;
      margin-top: 6px;
      color: #8c9bb0;
      font-size: 12px;
    }
    input[type="file"] {
      display: none;
    }
    .file-meta {
      margin-top: 10px;
      font-size: 13px;
      color: #9fb0c7;
      display: none;
    }
    .file-meta.visible {
      display: block;
    }
    .label {
      display: block;
      margin: 10px 0 4px;
      font-size: 13px;
      color: #c5d3e8;
    }
    input[type="text"],
    textarea,
    input[type="number"] {
      width: 100%;
      padding: 8px 10px;
      border-radius: 6px;
      border: 1px solid #27354a;
      background: #0b1721;
      color: #f3f7fb;
      font-size: 14px;
      box-sizing: border-box;
    }
    textarea {
      min-height: 90px;
      resize: vertical;
    }
    .char-counter {
      text-align: right;
      font-size: 11px;
      margin-top: 2px;
      color: #7b8ba4;
    }
    .features-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px 18px;
      font-size: 13px;
    }
    .feature-label {
      color: #9fb0c7;
    }
    .feature-value {
      font-weight: 600;
      color: #dbe6f5;
    }
    .actions {
      margin-top: 18px;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }
    button {
      border-radius: 999px;
      padding: 8px 18px;
      border: none;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      transition: background 0.15s ease, transform 0.05s ease, opacity 0.15s ease;
    }
    button:disabled {
      opacity: 0.55;
      cursor: default;
      transform: none;
    }
    button.primary {
      background: #2180a4;
      color: #f3f7fb;
    }
    button.primary:hover:not(:disabled) {
      background: #1b6a87;
      transform: translateY(-1px);
    }
    button.secondary {
      background: #182435;
      color: #d0def3;
    }
    button.secondary:hover:not(:disabled) {
      background: #202f44;
      transform: translateY(-1px);
    }
    .error {
      margin-top: 8px;
      font-size: 12px;
      color: #ff7b80;
      display: none;
    }
    .error.visible {
      display: block;
    }
    .loading {
      font-size: 12px;
      color: #9fb0c7;
      display: none;
    }
    .loading.visible {
      display: block;
    }
    .results {
      margin-top: 16px;
      padding: 16px;
      border-radius: 10px;
      background: #0b1721;
      border: 1px solid rgba(255, 255, 255, 0.05);
      display: none;
    }
    .results.visible {
      display: block;
    }
    .score-row {
      display: flex;
      align-items: center;
      gap: 16px;
      flex-wrap: wrap;
    }
    .score-circle {
      width: 90px;
      height: 90px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      background: radial-gradient(circle at 30% 30%, #1a4960, #0b1721);
      border: 2px solid #2180a4;
      box-shadow: 0 0 18px rgba(33, 128, 164, 0.35);
    }
    .score-circle.viral {
      border-color: #28c081;
      box-shadow: 0 0 18px rgba(40, 192, 129, 0.4);
      background: radial-gradient(circle at 30% 30%, #2f7c57, #041610);
    }
    .score-circle.non-viral {
      border-color: #ff5459;
      box-shadow: 0 0 18px rgba(255, 84, 89, 0.4);
      background: radial-gradient(circle at 30% 30%, #8a3035, #21080a);
    }
    .score-value {
      font-size: 24px;
      font-weight: 700;
    }
    .score-label {
      margin-top: 4px;
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: #9fb0c7;
    }
    .probability {
      font-size: 13px;
      color: #c5d3e8;
    }
    .confidence-bar {
      margin-top: 10px;
      height: 8px;
      width: 100%;
      border-radius: 999px;
      background: #121d2b;
      overflow: hidden;
    }
    .confidence-fill {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #ff5459, #28c081);
      transition: width 0.3s ease;
    }
    .probability-text {
      margin-top: 6px;
      font-size: 12px;
      color: #a6b5cb;
    }
  </style>
</head>
<body>
  <div class="app">
    <h1>Video Virality Predictor</h1>

    <div class="status">
      <div id="status-indicator" class="status-indicator status--info"></div>
      <div id="status-text">Loading model…</div>
    </div>

    <div class="grid">
      <!-- Left: upload + metadata -->
      <div class="card">
        <h2>1. Upload Video & Metadata</h2>

        <div id="upload-area" class="upload-area">
          <strong>Drop video here</strong><br />
          <small>or click to browse (MP4 / WebM / Ogg, max 100 MB)</small>
          <input id="video-file" type="file" accept="video/*" />
        </div>

        <div id="file-meta" class="file-meta">
          <div><strong>File:</strong> <span id="file-name">–</span></div>
          <div><strong>Size:</strong> <span id="file-size">–</span></div>
          <div><strong>Duration:</strong> <span id="file-duration">–</span></div>
        </div>

        <label class="label" for="video-title">Video Title</label>
        <input id="video-title" type="text" maxlength="500" placeholder="Enter video title…" />
        <div class="char-counter">
          Max 500 | Current: <span id="title-count">0</span>
        </div>

        <label class="label" for="video-description">Video Description</label>
        <textarea id="video-description" maxlength="2000" placeholder="Enter video description…"></textarea>
        <div class="char-counter">
          Max 2000 | Current: <span id="description-count">0</span>
        </div>

        <div class="actions">
          <button id="extract-btn" class="secondary" disabled>Extract Features</button>
        </div>

        <div id="error-message" class="error"></div>
        <div id="loading-message" class="loading">Working…</div>
      </div>

      <!-- Right: features + prediction -->
      <div class="card">
        <h2>2. Extracted Features</h2>
        <div class="features-grid">
          <div>
            <div class="feature-label">Title Length</div>
            <div class="feature-value" id="feature-title-length">0</div>
          </div>
          <div>
            <div class="feature-label">Description Length</div>
            <div class="feature-value" id="feature-description-length">0</div>
          </div>
          <div>
            <div class="feature-label">Edge Intensity</div>
            <div class="feature-value" id="feature-edge-intensity">–</div>
          </div>
          <div>
            <div class="feature-label">Color Histogram</div>
            <div class="feature-value" id="feature-color-histogram">–</div>
          </div>
          <div>
            <div class="feature-label">Spectral Entropy</div>
            <div class="feature-value" id="feature-spectral-entropy">–</div>
          </div>
          <div>
            <div class="feature-label">Audio Intensity</div>
            <div class="feature-value" id="feature-audio-intensity">–</div>
          </div>
        </div>

        <div class="actions">
          <button id="predict-btn" class="primary" disabled>Predict Virality</button>
          <button id="reset-btn" class="secondary">Reset</button>
        </div>

        <div id="results" class="results">
          <div class="score-row">
            <div id="score-circle" class="score-circle non-viral">
              <div>
                <div id="virality-score" class="score-value">0%</div>
                <div id="virality-label" class="score-label">NOT VIRAL</div>
              </div>
            </div>
            <div class="probability">
              <div id="probability-text">Probability: 0.0000 (0%)</div>
              <div class="confidence-bar">
                <div id="confidence-fill" class="confidence-fill"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
